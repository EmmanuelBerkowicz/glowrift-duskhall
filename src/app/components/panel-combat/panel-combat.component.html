@let currentTab = activeTab();

<app-card-page>
  <span header>Combat</span>

  <div pageactions>
    <button class="ml-8 btn btn-clear" (click)="closeMenu()">
      <app-icon name="tablerX"></app-icon>
    </button>
  </div>

  <div class="flex justify-between items-center">
    <div role="tablist" class="tabs tabs-boxed">
      @for (tab of tabs; track $index) {
        <button
          role="tab"
          class="tab"
          [class.tab-active]="currentTab === tab.link"
          (click)="changeActiveTab(tab.link)"
          (keydown)="changeActiveTab(tab.link)"
        >
          {{ tab.name }}
        </button>
      }
    </div>
    @if (combatTabVisibility()) {
      <button
        class="btn btn-warn"
        style="text-transform: uppercase"
        (click)="fleeFromCombat()"
      >
        Flee
      </button>
    }
  </div>

  <div class="p-3 max-h-[500px] overflow-y-auto">
    @switch (currentTab) {
      @case ('Preferences') {
        <app-panel-combat-preferences></app-panel-combat-preferences>
      }

      @case ('Claims') {
        <app-panel-combat-claims></app-panel-combat-claims>
      }

      @case ('CombatLog') {
        <app-panel-combat-combatlog></app-panel-combat-combatlog>
      }
      @case ('CombatLog') {
        <app-panel-combat-combatlog></app-panel-combat-combatlog>
      }
    }
  </div>
</app-card-page>
